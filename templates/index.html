// 1. VER DETALLE E INSCRITOS
async function verDetalle(id) {
    const nombre = prompt("Ingresa tu nombre para ver la lista:");
    if (!nombre) return;

    try {
        const res = await fetch(`${API_URL}/api/partidos/${id}/inscritos`);
        const inscritos = await res.json();
        alert("Inscritos actualmente:\n" + inscritos.map(i => "- " + i.nombre_usuario).join("\n"));
    } catch (e) { alert("Error al cargar lista."); }
}

// 2. BOTÃ“N DE DESUNIRSE
async function desunirse(id) {
    const nombre = prompt("Ingresa tu nombre exacto para salir del partido:");
    if (!nombre) return;

    try {
        const res = await fetch(`${API_URL}/api/desunirse`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ partidoId: id, nombre_usuario: nombre })
        });
        const data = await res.json();
        alert(data.mensaje || data.error);
        cargarActividades();
    } catch (e) { alert("Error al procesar solicitud."); }
}

// 3. MAPA DINÃMICO (En el renderizado de la lista)
// En tu funciÃ³n cargarActividades(), actualiza el HTML generado:
contenedor.innerHTML = datos.map(act => `
    <div class="card">
        <span class="badge">${act.deporte}</span>
        <h3>${act.deporte} en ${act.lugar}</h3>
        
        <div class="map-container" style="height:150px; margin-bottom:10px;">
            <iframe width="100%" height="100%" frameborder="0" 
                src="https://maps.google.com/maps?q=${encodeURIComponent(act.lugar)}&t=&z=15&ie=UTF8&iwloc=&output=embed">
            </iframe>
        </div>

        <p>ðŸ“… ${new Date(act.fecha_hora).toLocaleString()}</p>
        <p>ðŸ‘¥ Cupos: ${act.cupos_actuales} / ${act.cupos_totales}</p>
        
        <button onclick="unirse(${act.id})" class="btn btn-success">Â¡Me Uno!</button>
        <button onclick="verDetalle(${act.id})" class="btn" style="background:#17a2b8; margin-top:5px;">Ver QuiÃ©nes Van</button>
        <button onclick="desunirse(${act.id})" class="btn btn-danger">Ya no puedo ir</button>
    </div>
`).join('');
